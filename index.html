<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëã±ÊñáÊâìÂ≠óÁ∑¥Áøí | English Typing Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .controls {
            padding: 20px 30px;
            background: #f8f9fa;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .difficulty-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            background: #e0e0e0;
            color: #333;
        }

        .difficulty-btn.active {
            background: #4CAF50;
            color: white;
            transform: scale(1.05);
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-left: auto;
            font-size: 14px;
            color: #666;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #4CAF50;
        }

        .practice-area {
            padding: 30px;
        }

        .sentence-display {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #4CAF50;
        }

        .sentence {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 10px;
            user-select: none;
            position: relative;
        }

        .audio-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
        }

        .audio-btn {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .audio-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }

        .audio-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .audio-btn.playing {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        .speed-slider {
            width: 80px;
            height: 4px;
            border-radius: 2px;
            background: #ddd;
            outline: none;
            cursor: pointer;
        }

        .char {
            position: relative;
        }

        .char.correct {
            background-color: #c8e6c9;
            color: #2e7d32;
        }

        .char.incorrect {
            background-color: #ffcdd2;
            color: #c62828;
        }

        .char.current {
            background-color: #2196F3;
            color: white;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        .translation {
            font-size: 14px;
            color: #666;
            font-style: italic;
            margin-top: 8px;
        }

        .input-area {
            position: relative;
        }

        .typing-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.6;
            resize: none;
            outline: none;
            transition: border-color 0.3s;
            font-family: 'Courier New', monospace;
        }

        .typing-input:focus {
            border-color: #4CAF50;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.3s ease;
        }

        .vocabulary {
            margin-top: 20px;
            padding: 20px;
            background: #fff3e0;
            border-radius: 10px;
            border-left: 4px solid #ff9800;
        }

        .vocab-title {
            font-size: 16px;
            font-weight: bold;
            color: #e65100;
            margin-bottom: 10px;
        }

        .vocab-item {
            margin-bottom: 8px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .vocab-word {
            font-weight: bold;
            color: #d84315;
            cursor: pointer;
            text-decoration: underline;
            text-decoration-style: dotted;
        }

        .vocab-word:hover {
            color: #2196F3;
        }

        .word-audio-btn {
            background: #e3f2fd;
            border: none;
            border-radius: 12px;
            padding: 2px 6px;
            cursor: pointer;
            font-size: 12px;
            color: #1976D2;
            transition: all 0.2s;
        }

        .word-audio-btn:hover {
            background: #2196F3;
            color: white;
        }

        .next-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 20px auto;
            display: block;
            transition: transform 0.3s;
        }

        .next-btn:hover {
            transform: translateY(-2px);
        }

        .next-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .feedback {
            text-align: center;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }

        .feedback.excellent { color: #4CAF50; }
        .feedback.good { color: #2196F3; }
        .feedback.fair { color: #FF9800; }
        .feedback.poor { color: #f44336; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Ëã±ÊñáÊâìÂ≠óÁ∑¥Áøí</h1>
            <p>English Typing Practice | B1-C1 Level</p>
        </div>

        <div class="controls">
            <div class="difficulty-selector">
                <span>Èõ£Â∫¶:</span>
                <button class="difficulty-btn" data-level="B1">B1 ‰∏≠Á¥ö</button>
                <button class="difficulty-btn active" data-level="B2">B2 ‰∏≠È´òÁ¥ö</button>
                <button class="difficulty-btn" data-level="C1">C1 È´òÁ¥ö</button>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value" id="wpm">0</span>
                    <span>WPM</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="accuracy">100%</span>
                    <span>Ê∫ñÁ¢∫Áéá</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="progress">0/10</span>
                    <span>ÈÄ≤Â∫¶</span>
                </div>
            </div>
        </div>

        <div class="practice-area">
            <div class="sentence-display">
                <div class="sentence" id="target-sentence"></div>
                <div class="audio-controls">
                    <button class="audio-btn" id="play-sentence">
                        üîä Êí≠ÊîæÂè•Â≠ê
                    </button>
                    <button class="audio-btn" id="play-slow">
                        üêå ÊÖ¢ÈÄüÊí≠Êîæ
                    </button>
                    <div class="speed-control">
                        <span>Ë™ûÈÄü:</span>
                        <input type="range" class="speed-slider" id="speed-slider" min="0.3" max="1.5" step="0.1" value="0.9">
                        <span id="speed-value">0.9x</span>
                    </div>
                </div>
                <div class="translation" id="translation"></div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>

            <div class="input-area">
                <textarea 
                    class="typing-input" 
                    id="typing-input" 
                    placeholder="Âú®Ê≠§Ëº∏ÂÖ•‰∏äÊñπËã±ÊñáÂè•Â≠ê..."
                    rows="3"
                ></textarea>
            </div>

            <div class="feedback" id="feedback"></div>

            <button class="next-btn" id="next-btn" disabled>‰∏ã‰∏ÄÂè• ‚Üí</button>

            <div class="vocabulary" id="vocabulary" style="display: none;">
                <div class="vocab-title">üìö ÈáçÈªûÂñÆÂ≠óËàáÁâáË™û</div>
                <div id="vocab-content"></div>
            </div>
        </div>
    </div>

    <script>
        class TypingPractice {
            constructor() {
                this.currentLevel = 'B2';
                this.currentSentenceIndex = 0;
                this.currentCharIndex = 0;
                this.startTime = null;
                this.errors = 0;
                this.totalChars = 0;
                this.completed = 0;
                this.speechRate = 0.9;
                this.currentSpeech = null;
                
                this.sentences = {
                    B1: [
                        {
                            text: "The weather forecast suggests that tomorrow will be significantly warmer than today.",
                            translation: "Â§©Ê∞£È†êÂ†±È°ØÁ§∫ÊòéÂ§©ÊúÉÊØî‰ªäÂ§©ÊöñÂíåÂæóÂ§ö„ÄÇ",
                            vocabulary: [
                                { word: "forecast", meaning: "È†êÂ†±" },
                                { word: "significantly", meaning: "È°ØËëóÂú∞" }
                            ]
                        },
                        {
                            text: "She decided to pursue a career in environmental science after watching a documentary.",
                            translation: "Âú®Áúã‰∫Ü‰∏ÄÈÉ®Á¥ÄÈåÑÁâáÂæåÔºåÂ•πÊ±∫ÂÆöÂæû‰∫ãÁí∞Â¢ÉÁßëÂ≠∏ÁöÑËÅ∑Ê•≠„ÄÇ",
                            vocabulary: [
                                { word: "pursue", meaning: "ËøΩÊ±ÇÔºåÂæû‰∫ã" },
                                { word: "environmental", meaning: "Áí∞Â¢ÉÁöÑ" },
                                { word: "documentary", meaning: "Á¥ÄÈåÑÁâá" }
                            ]
                        },
                        {
                            text: "The restaurant manager apologized for the inconvenience caused by the delayed service.",
                            translation: "È§êÂª≥Á∂ìÁêÜÁÇ∫Âª∂Ë™§ÊúçÂãôÈÄ†ÊàêÁöÑ‰∏ç‰æøÈÅìÊ≠â„ÄÇ",
                            vocabulary: [
                                { word: "apologized", meaning: "ÈÅìÊ≠â" },
                                { word: "inconvenience", meaning: "‰∏ç‰æø" },
                                { word: "delayed", meaning: "Âª∂Ë™§ÁöÑ" }
                            ]
                        },
                        {
                            text: "Regular exercise and a balanced diet are essential for maintaining good health.",
                            translation: "Ë¶èÂæãÈÅãÂãïÂíåÂùáË°°È£≤È£üÂ∞çÊñºÁ∂≠ÊåÅËâØÂ•ΩÂÅ•Â∫∑ÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑ„ÄÇ",
                            vocabulary: [
                                { word: "balanced", meaning: "ÂùáË°°ÁöÑ" },
                                { word: "essential", meaning: "ÂøÖ‰∏çÂèØÂ∞ëÁöÑ" },
                                { word: "maintaining", meaning: "Á∂≠ÊåÅ" }
                            ]
                        },
                        {
                            text: "The conference will focus on innovative solutions to address climate change challenges.",
                            translation: "ÈÄôÊ¨°ÊúÉË≠∞Â∞áÂ∞àÊ≥®ÊñºÊáâÂ∞çÊ∞£ÂÄôËÆäÂåñÊåëÊà∞ÁöÑÂâµÊñ∞Ëß£Ê±∫ÊñπÊ°à„ÄÇ",
                            vocabulary: [
                                { word: "conference", meaning: "ÊúÉË≠∞" },
                                { word: "innovative", meaning: "ÂâµÊñ∞ÁöÑ" },
                                { word: "address", meaning: "ÊáâÂ∞çÔºåËôïÁêÜ" }
                            ]
                        },
                        {
                            text: "Online learning platforms have become increasingly popular among students worldwide.",
                            translation: "Á∑ö‰∏äÂ≠∏ÁøíÂπ≥Âè∞Âú®ÂÖ®‰∏ñÁïåÁöÑÂ≠∏Áîü‰∏≠Ë∂ä‰æÜË∂äÂèóÊ≠°Ëøé„ÄÇ",
                            vocabulary: [
                                { word: "platforms", meaning: "Âπ≥Âè∞" },
                                { word: "increasingly", meaning: "Ë∂ä‰æÜË∂ä" },
                                { word: "popular", meaning: "ÂèóÊ≠°ËøéÁöÑ" }
                            ]
                        },
                        {
                            text: "The company implemented new security measures to protect customer information.",
                            translation: "ÂÖ¨Âè∏ÂØ¶ÊñΩ‰∫ÜÊñ∞ÁöÑÂÆâÂÖ®Êé™ÊñΩ‰æÜ‰øùË≠∑ÂÆ¢Êà∂‰ø°ÊÅØ„ÄÇ",
                            vocabulary: [
                                { word: "implemented", meaning: "ÂØ¶ÊñΩ" },
                                { word: "measures", meaning: "Êé™ÊñΩ" },
                                { word: "protect", meaning: "‰øùË≠∑" }
                            ]
                        },
                        {
                            text: "Cultural diversity enriches our understanding of different perspectives and traditions.",
                            translation: "ÊñáÂåñÂ§öÊ®£ÊÄßË±êÂØå‰∫ÜÊàëÂÄëÂ∞ç‰∏çÂêåËßÄÈªûÂíåÂÇ≥Áµ±ÁöÑÁêÜËß£„ÄÇ",
                            vocabulary: [
                                { word: "diversity", meaning: "Â§öÊ®£ÊÄß" },
                                { word: "enriches", meaning: "Ë±êÂØå" },
                                { word: "perspectives", meaning: "ËßÄÈªû" }
                            ]
                        },
                        {
                            text: "Scientists continue to explore renewable energy sources as alternatives to fossil fuels.",
                            translation: "ÁßëÂ≠∏ÂÆ∂ÂÄëÁπºÁ∫åÊé¢Á¥¢ÂèØÂÜçÁîüËÉΩÊ∫ê‰ΩúÁÇ∫ÂåñÁü≥ÁáÉÊñôÁöÑÊõø‰ª£ÂìÅ„ÄÇ",
                            vocabulary: [
                                { word: "renewable", meaning: "ÂèØÂÜçÁîüÁöÑ" },
                                { word: "sources", meaning: "‰æÜÊ∫ê" },
                                { word: "alternatives", meaning: "Êõø‰ª£ÂìÅ" }
                            ]
                        },
                        {
                            text: "The museum exhibition displays artifacts from ancient civilizations around the world.",
                            translation: "ÂçöÁâ©È§®Â±ïË¶ΩÂ±ïÁ§∫‰∫Ü‰æÜËá™‰∏ñÁïåÂêÑÂú∞Âè§‰ª£ÊñáÊòéÁöÑÊñáÁâ©„ÄÇ",
                            vocabulary: [
                                { word: "exhibition", meaning: "Â±ïË¶Ω" },
                                { word: "artifacts", meaning: "ÊñáÁâ©" },
                                { word: "civilizations", meaning: "ÊñáÊòé" }
                            ]
                        }
                    ],
                    B2: [
                        {
                            text: "The implementation of artificial intelligence in healthcare has revolutionized diagnostic procedures.",
                            translation: "‰∫∫Â∑•Êô∫ËÉΩÂú®ÈÜ´ÁôÇ‰øùÂÅ•È†òÂüüÁöÑÂØ¶ÊñΩÂ∑≤Á∂ìÂæπÂ∫ïÊîπËÆä‰∫ÜË®∫Êñ∑Á®ãÂ∫è„ÄÇ",
                            vocabulary: [
                                { word: "implementation", meaning: "ÂØ¶ÊñΩ" },
                                { word: "revolutionized", meaning: "ÂæπÂ∫ïÊîπËÆä" },
                                { word: "diagnostic", meaning: "Ë®∫Êñ∑ÁöÑ" }
                            ]
                        },
                        {
                            text: "Despite the challenging circumstances, the team demonstrated remarkable resilience and adaptability.",
                            translation: "ÂÑòÁÆ°Áí∞Â¢ÉÂÖÖÊªøÊåëÊà∞ÔºåÂúòÈöäÂ±ïÁèæ‰∫ÜÈùûÂá°ÁöÑÈüåÊÄßÂíåÈÅ©ÊáâËÉΩÂäõ„ÄÇ",
                            vocabulary: [
                                { word: "circumstances", meaning: "Áí∞Â¢ÉÔºåÊÉÖÊ≥Å" },
                                { word: "remarkable", meaning: "ÈùûÂá°ÁöÑ" },
                                { word: "resilience", meaning: "ÈüåÊÄß" },
                                { word: "adaptability", meaning: "ÈÅ©ÊáâËÉΩÂäõ" }
                            ]
                        },
                        {
                            text: "The sustainable development goals require collaborative efforts from governments and corporations worldwide.",
                            translation: "ÂèØÊåÅÁ∫åÁôºÂ±ïÁõÆÊ®ôÈúÄË¶ÅÂÖ®ÁêÉÊîøÂ∫úÂíå‰ºÅÊ•≠ÁöÑÂêà‰ΩúÂä™Âäõ„ÄÇ",
                            vocabulary: [
                                { word: "sustainable", meaning: "ÂèØÊåÅÁ∫åÁöÑ" },
                                { word: "collaborative", meaning: "Âêà‰ΩúÁöÑ" },
                                { word: "corporations", meaning: "‰ºÅÊ•≠" }
                            ]
                        },
                        {
                            text: "Contemporary literature often explores themes of identity, belonging, and social transformation.",
                            translation: "Áï∂‰ª£ÊñáÂ≠∏Á∂ìÂ∏∏Êé¢Á¥¢Ë∫´‰ªΩË™çÂêå„ÄÅÊ≠∏Â±¨ÊÑüÂíåÁ§æÊúÉËÆäÈù©ÁöÑ‰∏ªÈ°å„ÄÇ",
                            vocabulary: [
                                { word: "contemporary", meaning: "Áï∂‰ª£ÁöÑ" },
                                { word: "explores", meaning: "Êé¢Á¥¢" },
                                { word: "transformation", meaning: "ËÆäÈù©" }
                            ]
                        },
                        {
                            text: "The psychological impact of social media on adolescents has become a significant research focus.",
                            translation: "Á§æ‰∫§Â™íÈ´îÂ∞çÈùíÂ∞ëÂπ¥ÂøÉÁêÜÂΩ±ÈüøÂ∑≤ÊàêÁÇ∫ÈáçË¶ÅÁ†îÁ©∂ÁÑ¶Èªû„ÄÇ",
                            vocabulary: [
                                { word: "psychological", meaning: "ÂøÉÁêÜÁöÑ" },
                                { word: "adolescents", meaning: "ÈùíÂ∞ëÂπ¥" },
                                { word: "significant", meaning: "ÈáçË¶ÅÁöÑ" }
                            ]
                        },
                        {
                            text: "Economic fluctuations demonstrate the interconnected nature of global financial markets.",
                            translation: "Á∂ìÊøüÊ≥¢ÂãïÈ°ØÁ§∫‰∫ÜÂÖ®ÁêÉÈáëËûçÂ∏ÇÂ†¥ÁöÑÁõ∏‰∫íÈóúËÅØÊÄß„ÄÇ",
                            vocabulary: [
                                { word: "fluctuations", meaning: "Ê≥¢Âãï" },
                                { word: "interconnected", meaning: "Áõ∏‰∫íÈóúËÅØÁöÑ" },
                                { word: "financial", meaning: "ÈáëËûçÁöÑ" }
                            ]
                        },
                        {
                            text: "Technological advancements have fundamentally altered communication patterns across different generations.",
                            translation: "ÊäÄË°ìÈÄ≤Ê≠•Ê†πÊú¨ÊîπËÆä‰∫Ü‰∏çÂêå‰∏ñ‰ª£‰πãÈñìÁöÑÊ∫ùÈÄöÊ®°Âºè„ÄÇ",
                            vocabulary: [
                                { word: "advancements", meaning: "ÈÄ≤Ê≠•" },
                                { word: "fundamentally", meaning: "Ê†πÊú¨Âú∞" },
                                { word: "generations", meaning: "‰∏ñ‰ª£" }
                            ]
                        },
                        {
                            text: "Archaeological discoveries continue to challenge our assumptions about ancient civilizations.",
                            translation: "ËÄÉÂè§ÁôºÁèæÊåÅÁ∫åÊåëÊà∞ÊàëÂÄëÂ∞çÂè§‰ª£ÊñáÊòéÁöÑÂÅáË®≠„ÄÇ",
                            vocabulary: [
                                { word: "archaeological", meaning: "ËÄÉÂè§ÁöÑ" },
                                { word: "challenge", meaning: "ÊåëÊà∞" },
                                { word: "assumptions", meaning: "ÂÅáË®≠" }
                            ]
                        },
                        {
                            text: "The complexity of urban planning requires interdisciplinary collaboration among various stakeholders.",
                            translation: "ÂüéÂ∏ÇË¶èÂäÉÁöÑË§áÈõúÊÄßÈúÄË¶ÅÂêÑÂà©ÁõäÁõ∏ÈóúËÄÖ‰πãÈñìÁöÑË∑®Â≠∏ÁßëÂêà‰Ωú„ÄÇ",
                            vocabulary: [
                                { word: "complexity", meaning: "Ë§áÈõúÊÄß" },
                                { word: "interdisciplinary", meaning: "Ë∑®Â≠∏ÁßëÁöÑ" },
                                { word: "stakeholders", meaning: "Âà©ÁõäÁõ∏ÈóúËÄÖ" }
                            ]
                        },
                        {
                            text: "Environmental conservation efforts must balance ecological protection with economic development needs.",
                            translation: "Áí∞Â¢É‰øùË≠∑Âä™ÂäõÂøÖÈ†àÂπ≥Ë°°ÁîüÊÖã‰øùË≠∑ËàáÁ∂ìÊøüÁôºÂ±ïÈúÄÊ±Ç„ÄÇ",
                            vocabulary: [
                                { word: "conservation", meaning: "‰øùË≠∑" },
                                { word: "ecological", meaning: "ÁîüÊÖãÁöÑ" },
                                { word: "development", meaning: "ÁôºÂ±ï" }
                            ]
                        }
                    ],
                    C1: [
                        {
                            text: "The paradigm shift towards renewable energy necessitates comprehensive policy restructuring and substantial infrastructure investment.",
                            translation: "ÂêëÂèØÂÜçÁîüËÉΩÊ∫êÁöÑÁØÑÂºèËΩâËÆäÈúÄË¶ÅÂÖ®Èù¢ÁöÑÊîøÁ≠ñÈáçÁµÑÂíåÂ§ßÈáèÁöÑÂü∫Á§éË®≠ÊñΩÊäïË≥á„ÄÇ",
                            vocabulary: [
                                { word: "paradigm shift", meaning: "ÁØÑÂºèËΩâËÆä" },
                                { word: "necessitates", meaning: "ÈúÄË¶ÅÔºåÂøÖÈ†à" },
                                { word: "comprehensive", meaning: "ÂÖ®Èù¢ÁöÑ" },
                                { word: "substantial", meaning: "Â§ßÈáèÁöÑ" }
                            ]
                        },
                        {
                            text: "The philosophical implications of consciousness studies intersect with neuroscience, cognitive psychology, and existential inquiry.",
                            translation: "ÊÑèË≠òÁ†îÁ©∂ÁöÑÂì≤Â≠∏ÊÑèÊ∂µËàáÁ•ûÁ∂ìÁßëÂ≠∏„ÄÅË™çÁü•ÂøÉÁêÜÂ≠∏ÂíåÂ≠òÂú®‰∏ªÁæ©Êé¢Á©∂Áõ∏‰∫í‰∫§Áπî„ÄÇ",
                            vocabulary: [
                                { word: "implications", meaning: "ÊÑèÊ∂µÔºåÂê´Áæ©" },
                                { word: "intersect", meaning: "Áõ∏‰∫í‰∫§Áπî" },
                                { word: "cognitive", meaning: "Ë™çÁü•ÁöÑ" },
                                { word: "existential", meaning: "Â≠òÂú®‰∏ªÁæ©ÁöÑ" }
                            ]
                        },
                        {
                            text: "Quantum computing represents an unprecedented technological breakthrough with profound ramifications for cryptography and data processing.",
                            translation: "ÈáèÂ≠êË®àÁÆó‰ª£Ë°®ËëóÂâçÊâÄÊú™ÊúâÁöÑÊäÄË°ìÁ™ÅÁ†¥ÔºåÂ∞çÂØÜÁ¢ºÂ≠∏ÂíåÊï∏ÊìöËôïÁêÜÂÖ∑ÊúâÊ∑±ÈÅ†ÂΩ±Èüø„ÄÇ",
                            vocabulary: [
                                { word: "unprecedented", meaning: "ÂâçÊâÄÊú™ÊúâÁöÑ" },
                                { word: "breakthrough", meaning: "Á™ÅÁ†¥" },
                                { word: "ramifications", meaning: "ÂΩ±ÈüøÔºåÂæåÊûú" },
                                { word: "cryptography", meaning: "ÂØÜÁ¢ºÂ≠∏" }
                            ]
                        },
                        {
                            text: "The intricate interplay between genetic predisposition and environmental factors determines phenotypic expression in complex organisms.",
                            translation: "ÈÅ∫ÂÇ≥ÂÇæÂêëËàáÁí∞Â¢ÉÂõ†Á¥†‰πãÈñìË§áÈõúÁöÑÁõ∏‰∫í‰ΩúÁî®Ê±∫ÂÆö‰∫ÜË§áÈõúÁîüÁâ©È´îÁöÑË°®ÁèæÂûãË°®ÈÅî„ÄÇ",
                            vocabulary: [
                                { word: "intricate", meaning: "Ë§áÈõúÁöÑ" },
                                { word: "interplay", meaning: "Áõ∏‰∫í‰ΩúÁî®" },
                                { word: "predisposition", meaning: "ÂÇæÂêë" },
                                { word: "phenotypic", meaning: "Ë°®ÁèæÂûãÁöÑ" }
                            ]
                        },
                        {
                            text: "Postcolonial literary criticism examines the lingering effects of imperialism on cultural identity and narrative construction.",
                            translation: "ÂæåÊÆñÊ∞ëÊñáÂ≠∏ÊâπË©ïÊ™¢Ë¶ñÂ∏ùÂúã‰∏ªÁæ©Â∞çÊñáÂåñË∫´‰ªΩÂíåÊïò‰∫ãÂª∫ÊßãÁöÑÊåÅÁ∫åÂΩ±Èüø„ÄÇ",
                            vocabulary: [
                                { word: "postcolonial", meaning: "ÂæåÊÆñÊ∞ëÁöÑ" },
                                { word: "lingering", meaning: "ÊåÅÁ∫åÁöÑ" },
                                { word: "imperialism", meaning: "Â∏ùÂúã‰∏ªÁæ©" },
                                { word: "narrative", meaning: "Êïò‰∫ã" }
                            ]
                        },
                        {
                            text: "Epistemological frameworks in empirical research methodology require rigorous scrutiny of assumptions underlying knowledge claims.",
                            translation: "ÂØ¶Ë≠âÁ†îÁ©∂ÊñπÊ≥ïË´ñ‰∏≠ÁöÑË™çË≠òË´ñÊ°ÜÊû∂ÈúÄË¶ÅÂ∞çÁü•Ë≠ò‰∏ªÂºµÂü∫Á§éÂÅáË®≠ÈÄ≤Ë°åÂö¥Ê†ºÂØ©Ë¶ñ„ÄÇ",
                            vocabulary: [
                                { word: "epistemological", meaning: "Ë™çË≠òË´ñÁöÑ" },
                                { word: "empirical", meaning: "ÂØ¶Ë≠âÁöÑ" },
                                { word: "methodology", meaning: "ÊñπÊ≥ïË´ñ" },
                                { word: "scrutiny", meaning: "ÂØ©Ë¶ñ" }
                            ]
                        },
                        {
                            text: "The phenomenological approach to consciousness elucidates the subjective experience of temporality and intentionality.",
                            translation: "Â∞çÊÑèË≠òÁöÑÁèæË±°Â≠∏ÊñπÊ≥ïÈó°Êòé‰∫ÜÊôÇÈñìÊÄßÂíåÊÑèÂêëÊÄßÁöÑ‰∏ªËßÄÈ´îÈ©ó„ÄÇ",
                            vocabulary: [
                                { word: "phenomenological", meaning: "ÁèæË±°Â≠∏ÁöÑ" },
                                { word: "elucidates", meaning: "Èó°Êòé" },
                                { word: "temporality", meaning: "ÊôÇÈñìÊÄß" },
                                { word: "intentionality", meaning: "ÊÑèÂêëÊÄß" }
                            ]
                        },
                        {
                            text: "Macroeconomic stabilization policies must accommodate heterogeneous market dynamics and asymmetric information structures.",
                            translation: "ÂÆèËßÄÁ∂ìÊøüÁ©©ÂÆöÊîøÁ≠ñÂøÖÈ†àÈÅ©ÊáâÁï∞Ë≥™Â∏ÇÂ†¥ÂãïÊÖãÂíåÈùûÂ∞çÁ®±‰ø°ÊÅØÁµêÊßã„ÄÇ",
                            vocabulary: [
                                { word: "macroeconomic", meaning: "ÂÆèËßÄÁ∂ìÊøüÁöÑ" },
                                { word: "heterogeneous", meaning: "Áï∞Ë≥™ÁöÑ" },
                                { word: "asymmetric", meaning: "ÈùûÂ∞çÁ®±ÁöÑ" },
                                { word: "structures", meaning: "ÁµêÊßã" }
                            ]
                        },
                        {
                            text: "Neuroplasticity research demonstrates the brain's capacity for synaptic reorganization throughout the human lifespan.",
                            translation: "Á•ûÁ∂ìÂèØÂ°ëÊÄßÁ†îÁ©∂Ë≠âÊòé‰∫ÜÂ§ßËÖ¶Âú®‰∫∫È°ûÊï¥ÂÄãÁîüÂëΩÈÄ±Êúü‰∏≠Á™ÅËß∏ÈáçÁµÑÁöÑËÉΩÂäõ„ÄÇ",
                            vocabulary: [
                                { word: "neuroplasticity", meaning: "Á•ûÁ∂ìÂèØÂ°ëÊÄß" },
                                { word: "synaptic", meaning: "Á™ÅËß∏ÁöÑ" },
                                { word: "reorganization", meaning: "ÈáçÁµÑ" },
                                { word: "lifespan", meaning: "ÁîüÂëΩÈÄ±Êúü" }
                            ]
                        },
                        {
                            text: "Poststructuralist discourse analysis deconstructs hegemonic narratives to reveal underlying power dynamics.",
                            translation: "ÂæåÁµêÊßã‰∏ªÁæ©Ë©±Ë™ûÂàÜÊûêËß£ÊßãÈú∏Ê¨äÊïò‰∫ã‰ª•Êè≠Á§∫ÊΩõÂú®ÁöÑÊ¨äÂäõÂãïÊÖã„ÄÇ",
                            vocabulary: [
                                { word: "poststructuralist", meaning: "ÂæåÁµêÊßã‰∏ªÁæ©ÁöÑ" },
                                { word: "deconstructs", meaning: "Ëß£Êßã" },
                                { word: "hegemonic", meaning: "Èú∏Ê¨äÁöÑ" },
                                { word: "dynamics", meaning: "ÂãïÊÖã" }
                            ]
                        }
                    ]
                };
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.loadSentence();
                this.initSpeech();
            }

            initSpeech() {
                // Check if speech synthesis is available
                if ('speechSynthesis' in window) {
                    this.speechAvailable = true;
                } else {
                    this.speechAvailable = false;
                    console.log('Speech synthesis not available');
                }
            }

            bindEvents() {
                // Difficulty selection
                document.querySelectorAll('.difficulty-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelector('.difficulty-btn.active').classList.remove('active');
                        e.target.classList.add('active');
                        this.currentLevel = e.target.dataset.level;
                        this.currentSentenceIndex = 0;
                        this.completed = 0;
                        this.loadSentence();
                    });
                });

                // Typing input
                const input = document.getElementById('typing-input');
                input.addEventListener('input', (e) => {
                    this.handleTyping(e.target.value);
                });

                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        e.preventDefault();
                    }
                });

                // Next button
                document.getElementById('next-btn').addEventListener('click', () => {
                    this.nextSentence();
                });

                // Speech controls
                document.getElementById('play-sentence').addEventListener('click', () => {
                    this.speakText(this.sentences[this.currentLevel][this.currentSentenceIndex].text, this.speechRate);
                });

                document.getElementById('play-slow').addEventListener('click', () => {
                    this.speakText(this.sentences[this.currentLevel][this.currentSentenceIndex].text, 0.6);
                });

                document.getElementById('speed-slider').addEventListener('input', (e) => {
                    this.speechRate = parseFloat(e.target.value);
                    document.getElementById('speed-value').textContent = this.speechRate + 'x';
                });
            }

            loadSentence() {
                const sentences = this.sentences[this.currentLevel];
                if (this.currentSentenceIndex >= sentences.length) {
                    this.currentSentenceIndex = 0;
                }
                
                const current = sentences[this.currentSentenceIndex];
                const sentenceElement = document.getElementById('target-sentence');
                const translationElement = document.getElementById('translation');
                const vocabElement = document.getElementById('vocabulary');
                const vocabContent = document.getElementById('vocab-content');

                // Display sentence with individual characters
                sentenceElement.innerHTML = current.text
                    .split('')
                    .map(char => `<span class="char">${char}</span>`)
                    .join('');

                translationElement.textContent = current.translation;

                // Show vocabulary with audio buttons
                vocabContent.innerHTML = current.vocabulary
                    .map(item => `
                        <div class="vocab-item">
                            <span class="vocab-word" onclick="typingPractice.speakText('${item.word}', 0.8)">${item.word}</span>
                            <button class="word-audio-btn" onclick="typingPractice.speakText('${item.word}', 0.8)">üîä</button>
                            : ${item.meaning}
                        </div>
                    `).join('');
                vocabElement.style.display = 'block';

                // Reset input and states
                document.getElementById('typing-input').value = '';
                document.getElementById('next-btn').disabled = true;
                document.getElementById('feedback').textContent = '';
                this.currentCharIndex = 0;
                this.startTime = null;
                this.errors = 0;
                this.totalChars = current.text.length;

                this.updateProgress();
                this.updateCharacterDisplay();
                
                // Stop any ongoing speech
                if (this.currentSpeech) {
                    speechSynthesis.cancel();
                }
            }

            speakText(text, rate = 0.9) {
                if (!this.speechAvailable) {
                    alert('Êä±Ê≠âÔºåÊÇ®ÁöÑÁÄèË¶ΩÂô®‰∏çÊîØÊè¥Ë™ûÈü≥ÂäüËÉΩ');
                    return;
                }

                // Cancel any ongoing speech
                speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = rate;
                utterance.pitch = 1;
                utterance.volume = 0.8;

                // Visual feedback
                const playBtn = document.getElementById('play-sentence');
                const slowBtn = document.getElementById('play-slow');
                
                utterance.onstart = () => {
                    if (rate > 0.7) {
                        playBtn.textContent = '‚è∏Ô∏è Êí≠Êîæ‰∏≠...';
                        playBtn.classList.add('playing');
                    } else {
                        slowBtn.textContent = '‚è∏Ô∏è ÊÖ¢ÈÄüÊí≠Êîæ‰∏≠...';
                        slowBtn.classList.add('playing');
                    }
                };

                utterance.onend = () => {
                    playBtn.textContent = 'üîä Êí≠ÊîæÂè•Â≠ê';
                    slowBtn.textContent = 'üêå ÊÖ¢ÈÄüÊí≠Êîæ';
                    playBtn.classList.remove('playing');
                    slowBtn.classList.remove('playing');
                };

                utterance.onerror = () => {
                    playBtn.textContent = 'üîä Êí≠ÊîæÂè•Â≠ê';
                    slowBtn.textContent = 'üêå ÊÖ¢ÈÄüÊí≠Êîæ';
                    playBtn.classList.remove('playing');
                    slowBtn.classList.remove('playing');
                    console.log('Speech synthesis error');
                };

                this.currentSpeech = utterance;
                speechSynthesis.speak(utterance);
            }

            handleTyping(inputValue) {
                if (!this.startTime && inputValue.length > 0) {
                    this.startTime = Date.now();
                }

                const targetText = this.sentences[this.currentLevel][this.currentSentenceIndex].text;
                const chars = document.querySelectorAll('.char');

                // Reset all character classes
                chars.forEach(char => {
                    char.classList.remove('correct', 'incorrect', 'current');
                });

                let correctChars = 0;
                let hasError = false;

                // Check each character
                for (let i = 0; i < Math.max(inputValue.length, targetText.length); i++) {
                    if (i < inputValue.length && i < targetText.length) {
                        if (inputValue[i] === targetText[i]) {
                            chars[i].classList.add('correct');
                            correctChars++;
                        } else {
                            chars[i].classList.add('incorrect');
                            hasError = true;
                            if (i >= this.currentCharIndex) {
                                this.errors++;
                                this.currentCharIndex = i + 1;
                            }
                        }
                    }
                }

                // Mark current character
                if (inputValue.length < targetText.length) {
                    chars[inputValue.length].classList.add('current');
                }

                // Update stats in real-time
                if (this.startTime && inputValue.length > 0) {
                    this.updateStats(inputValue.length, correctChars);
                }

                // Check if completed
                if (inputValue === targetText) {
                    this.completeCurrentSentence();
                }
            }

            updateStats(typedLength, correctChars) {
                if (this.startTime && typedLength > 0) {
                    const timeElapsed = (Date.now() - this.startTime) / 1000 / 60; // minutes
                    // Calculate words typed (standard: 5 characters = 1 word)
                    const grossWPM = Math.round((typedLength / 5) / timeElapsed) || 0;
                    // Calculate net WPM (subtract errors)
                    const netWPM = Math.max(0, Math.round(((correctChars) / 5) / timeElapsed)) || 0;
                    
                    document.getElementById('wpm').textContent = netWPM;
                }

                const accuracy = typedLength > 0 ? Math.round((correctChars / typedLength) * 100) : 100;
                document.getElementById('accuracy').textContent = accuracy + '%';
            }

            completeCurrentSentence() {
                this.completed++;
                document.getElementById('next-btn').disabled = false;
                
                const accuracy = parseInt(document.getElementById('accuracy').textContent);
                const wpm = parseInt(document.getElementById('wpm').textContent);
                
                let feedback = '';
                let feedbackClass = '';
                
                if (accuracy >= 98 && wpm >= 40) {
                    feedback = 'üåü ÂÑ™ÁßÄÔºÅÊ∫ñÁ¢∫ÁéáÂíåÈÄüÂ∫¶ÈÉΩÂæàÊ£íÔºÅ';
                    feedbackClass = 'excellent';
                } else if (accuracy >= 95 && wpm >= 30) {
                    feedback = 'üëç ÂæàÂ•ΩÔºÅÁπºÁ∫å‰øùÊåÅÔºÅ';
                    feedbackClass = 'good';
                } else if (accuracy >= 90 && wpm >= 20) {
                    feedback = 'üìà ‰∏çÈåØÔºÅÈÇÑÊúâÈÄ≤Ê≠•Á©∫ÈñìÔºÅ';
                    feedbackClass = 'fair';
                } else {
                    feedback = 'üí™ ÁπºÁ∫åÁ∑¥ÁøíÔºå‰Ω†ÊúÉË∂ä‰æÜË∂äÂ•ΩÁöÑÔºÅ';
                    feedbackClass = 'poor';
                }
                
                const feedbackElement = document.getElementById('feedback');
                feedbackElement.textContent = feedback;
                feedbackElement.className = 'feedback ' + feedbackClass;

                this.updateProgress();
            }

            nextSentence() {
                this.currentSentenceIndex++;
                if (this.currentSentenceIndex >= this.sentences[this.currentLevel].length) {
                    this.currentSentenceIndex = 0;
                }
                this.loadSentence();
            }

            updateProgress() {
                const total = this.sentences[this.currentLevel].length;
                const current = this.currentSentenceIndex + 1;
                document.getElementById('progress').textContent = `${current}/${total}`;
                
                const percentage = (current / total) * 100;
                document.getElementById('progress-fill').style.width = percentage + '%';
            }

            updateCharacterDisplay() {
                const chars = document.querySelectorAll('.char');
                chars.forEach((char, index) => {
                    if (index === 0) {
                        char.classList.add('current');
                    }
                });
            }
        }

        // Initialize the app
        let typingPractice;
        document.addEventListener('DOMContentLoaded', () => {
            typingPractice = new TypingPractice();
        });
    </script>
</body>
</html>